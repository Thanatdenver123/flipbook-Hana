<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hana Photos Album</title>
    <script src="https://cdn.jsdelivr.net/npm/page-flip/dist/js/page-flip.browser.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Patrick+Hand&family=Sarabun:wght@300;400&display=swap" rel="stylesheet">
    
    <style>
        /* --- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏û‡∏∑‡πâ‡∏ô‡∏ê‡∏≤‡∏ô --- */
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            /* ‡πÉ‡∏ä‡πâ‡∏ü‡∏≠‡∏ô‡∏ï‡πå‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏•‡∏±‡∏Å */
            font-family: 'Patrick Hand', 'Sarabun', sans-serif; 
            background-color: #ffe4e1; /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π‡∏≠‡πà‡∏≠‡∏ô */
            overflow: hidden;
        }

        /* --- SCREEN 1: ‡∏´‡∏ô‡πâ‡∏≤‡∏≠‡∏±‡∏û‡πÇ‡∏´‡∏•‡∏î (‡∏õ‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏Ç‡∏∂‡πâ‡∏ô) --- */
        #upload-screen {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100vh;
            /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á Gradient ‡∏™‡∏µ‡∏û‡∏≤‡∏™‡πÄ‡∏ó‡∏• */
            background: linear-gradient(135deg, #fff0f5 0%, #e6e6fa 100%);
            transition: opacity 0.5s;
        }

        .upload-card {
            background: rgba(255, 255, 255, 0.9);
            padding: 40px;
            border-radius: 30px; /* ‡∏Ç‡∏≠‡∏ö‡∏°‡∏ô‡∏°‡∏≤‡∏Å */
            border: 4px dashed #ffb6c1; /* ‡∏Ç‡∏≠‡∏ö‡πÄ‡∏™‡πâ‡∏ô‡∏õ‡∏£‡∏∞‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π */
            box-shadow: 0 10px 30px rgba(255, 182, 193, 0.3);
            text-align: center;
            max-width: 500px;
            width: 90%;
        }

        .upload-icon { font-size: 60px; margin-bottom: 20px; }
        .upload-card h2 { font-family: 'Fredoka One', cursive; color: #ff85a2; }

        /* --- SCREEN 2: ‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏™‡∏î‡∏á‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠ --- */
        #book-screen {
            display: none;
            width: 100%;
            height: 100vh;
            position: relative;
            /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å */
            background-color: #fff0f5;
            background-image: radial-gradient(#ffc0cb 2px, transparent 2px);
            background-size: 20px 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        /* ‚ú®‚ú® ‡∏™‡πà‡∏ß‡∏ô‡∏´‡∏±‡∏ß‡∏Ç‡πâ‡∏≠ Hana Photos ‚ú®‚ú® */
        .cute-title {
            font-family: 'Fredoka One', cursive;
            color: #ff85a2; /* ‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π‡πÄ‡∏Ç‡πâ‡∏° */
            font-size: 3.5em;
            text-align: center;
            margin-top: 20px;
            margin-bottom: 10px;
            /* ‡πÄ‡∏á‡∏≤‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏õ‡πä‡∏≠‡∏õ‡∏Ç‡∏∂‡πâ‡∏ô‡∏°‡∏≤ */
            text-shadow: 3px 3px 0px #fff, 5px 5px 0px rgba(0,0,0,0.1);
            z-index: 10;
        }

        #book-wrapper-container {
            flex-grow: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 100%;
            padding-bottom: 80px; /* ‡πÄ‡∏ú‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡πÉ‡∏´‡πâ toolbar */
        }

        /* --- ‚ú® ‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡∏´‡∏ô‡πâ‡∏≤‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏©‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å ‚ú® --- */
        .page {
            background-color: #fff;
            /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏ß‡∏î‡∏•‡∏≤‡∏¢‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏Ç‡∏≠‡∏á‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© (‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î‡∏à‡∏≤‡∏á‡πÜ) */
            background-image: radial-gradient(#ffe4e1 20%, transparent 20%), radial-gradient(#ffe4e1 20%, transparent 20%);
            background-position: 0 0, 10px 10px;
            background-size: 20px 20px;
            
            /* ‡∏Ç‡∏≠‡∏ö‡πÅ‡∏•‡∏∞‡∏°‡∏∏‡∏°‡πÇ‡∏Ñ‡πâ‡∏á‡∏°‡∏ô */
            border: 3px solid #ffb6c1; /* ‡∏Ç‡∏≠‡∏ö‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π */
            border-radius: 15px; /* ‡∏°‡∏∏‡∏°‡πÇ‡∏Ñ‡πâ‡∏á */
            overflow: hidden !important; /* ‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏ï‡∏±‡∏î‡∏Ç‡∏≠‡∏ö‡∏ï‡∏≤‡∏°‡∏°‡∏∏‡∏°‡πÇ‡∏Ñ‡πâ‡∏á */
            box-shadow: inset 0 0 15px rgba(255,182,193,0.4); /* ‡πÄ‡∏á‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡πÉ‡∏ô‡∏î‡∏π‡∏ô‡∏∏‡πà‡∏°‡∏ô‡∏ß‡∏• */
        }

        /* --- Grid Layout --- */
        .photo-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            grid-template-rows: 1fr 1fr;
            width: 100%;
            height: 100%;
            padding: 15px; /* ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏à‡∏≤‡∏Å‡∏Ç‡∏≠‡∏ö‡∏Å‡∏£‡∏∞‡∏î‡∏≤‡∏© */
            box-sizing: border-box;
            gap: 12px; /* ‡∏£‡∏∞‡∏¢‡∏∞‡∏´‡πà‡∏≤‡∏á‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏£‡∏π‡∏õ */
        }

        /* ‡∏Å‡∏£‡∏≠‡∏ö‡πÉ‡∏™‡πà‡∏£‡∏π‡∏õ‡πÅ‡∏ï‡πà‡∏•‡∏∞‡∏£‡∏π‡∏õ */
        .grid-cell {
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #fff;
            border-radius: 10px; /* ‡∏°‡∏∏‡∏°‡πÇ‡∏Ñ‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏Å‡∏£‡∏≠‡∏ö‡∏£‡∏π‡∏õ */
            border: 2px dashed #ffcae6; /* ‡πÄ‡∏™‡πâ‡∏ô‡∏õ‡∏£‡∏∞‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π‡∏´‡∏ß‡∏≤‡∏ô‡πÜ */
            overflow: hidden;
            padding: 5px; /* ‡∏Ç‡∏≠‡∏ö‡∏Ç‡∏≤‡∏ß‡∏£‡∏≠‡∏ö‡∏£‡∏π‡∏õ‡∏ô‡∏¥‡∏î‡∏´‡∏ô‡πà‡∏≠‡∏¢‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÇ‡∏û‡∏•‡∏≤‡∏•‡∏≠‡∏¢‡∏î‡πå */
            box-shadow: 2px 2px 5px rgba(0,0,0,0.05);
        }

        .photo-item {
            width: 100%;
            height: 100%;
            object-fit: contain; 
            border-radius: 5px;
        }

        /* --- UI Controls (‡∏õ‡∏∏‡πà‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ) --- */
        .btn {
            background-color: #ff85a2;
            color: white;
            padding: 12px 30px;
            border-radius: 30px;
            cursor: pointer;
            font-size: 18px;
            border: 3px solid #fff;
            box-shadow: 0 4px 10px rgba(255, 133, 162, 0.4);
            transition: 0.3s;
            display: inline-block;
            margin-top: 10px;
            font-family: 'Fredoka One', cursive;
        }
        .btn:hover { background-color: #ff6b8b; transform: translateY(-3px); }

        input[type="file"] { display: none; }

        /* Toolbar ‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á */
        #toolbar {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            /* ‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á‡∏™‡∏µ‡∏Ç‡∏≤‡∏ß‡πÇ‡∏õ‡∏£‡πà‡∏á‡πÅ‡∏™‡∏á */
            background: rgba(255, 255, 255, 0.85);
            padding: 10px 25px;
            border-radius: 50px;
            border: 3px solid #ffb6c1; /* ‡∏Ç‡∏≠‡∏ö‡∏™‡∏µ‡∏ä‡∏°‡∏û‡∏π */
            display: flex;
            gap: 15px;
            align-items: center;
            z-index: 100;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .tool-btn {
            background: none;
            border: 2px solid #ffcae6;
            color: #ff85a2;
            padding: 8px 20px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-family: 'Patrick Hand', cursive;
            font-weight: bold;
            display: flex;
            align-items: center;
            transition: 0.2s;
        }
        .tool-btn:hover { background: #ffe4e1; }

    </style>
</head>
<body>

    <div id="upload-screen">
        <div class="upload-card">
            <div class="upload-icon">üå∏üìñ</div>
            <h2>‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏±‡∏•‡∏ö‡∏±‡πâ‡∏° Hana Photos</h2>
            <p style="color: #888; margin-bottom: 20px; font-size: 1.2em;">(‡πÇ‡∏´‡∏°‡∏î‡∏™‡∏£‡πâ‡∏≤‡∏á) ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏™‡∏∏‡∏î‡∏ô‡πà‡∏≤‡∏£‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
            
            <label for="bookUpload" class="btn">‚ú® ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</label>
            <input type="file" id="bookUpload" multiple accept="image/*">
            <p style="margin-top: 20px; font-size: 14px; color: #aaa;">*‡∏´‡∏≤‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏£‡πå ‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏™‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå Google Drive ‡πÉ‡∏ô‡πÇ‡∏Ñ‡πâ‡∏î*</p>
        </div>
    </div>

    <div id="book-screen">
        <h1 class="cute-title">üå∏ Hana Photos üå∏</h1>
        
        <div id="book-wrapper-container">
            <div id="myBook"></div>
        </div>

        <div id="toolbar">
            <button id="backBtn" class="tool-btn" onclick="goBack()">‚¨ÖÔ∏è ‡∏ó‡∏≥‡πÄ‡∏•‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</button>
            
            <label for="bgUpload" class="tool-btn" style="cursor: pointer;">üñºÔ∏è BG ‡∏£‡∏π‡∏õ</label>
            <input type="file" id="bgUpload" accept="image/*">

            <label for="bgColor" class="tool-btn" style="cursor: pointer; padding: 5px;">
                üé® <input type="color" id="bgColor" value="#fff0f5" style="opacity:0; width: 20px; height: 20px; cursor: pointer;">
            </label>
        </div>
    </div>

    <script>
        // ============================================================
        // üü¢ ‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏´‡∏°‡∏î‡πÅ‡∏ä‡∏£‡πå (‡πÉ‡∏™‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå Google Drive ‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà) üü¢
        // ============================================================
        
        const VIEWER_IMAGES = [
            // ‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏Å‡∏≤‡∏£‡πÉ‡∏™‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå (‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß‡πÉ‡∏™‡πà‡∏•‡∏¥‡∏á‡∏Å‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡πÄ‡∏≠‡∏á):
            //"https://drive.google.com/uc?export=view&id=YOUR_IMAGE_ID_1",
            //"https://drive.google.com/uc?export=view&id=YOUR_IMAGE_ID_2"
        ];

        // ============================================================

        let pageFlip = null;
        const uploadScreen = document.getElementById('upload-screen');
        const bookScreen = document.getElementById('book-screen');
        const bookWrapper = document.getElementById('myBook');
        const backBtn = document.getElementById('backBtn');

        document.addEventListener('DOMContentLoaded', () => {
            if (VIEWER_IMAGES.length > 0) {
                backBtn.style.display = 'none';
                createBook(VIEWER_IMAGES);
            }
        });

        function createBook(images) {
            uploadScreen.style.display = 'none';
            bookScreen.style.display = 'flex'; // ‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô flex ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏≤‡∏á

            if (pageFlip) pageFlip.destroy();
            bookWrapper.innerHTML = '';

            const itemsPerPage = 4;
            
            for (let i = 0; i < images.length; i += itemsPerPage) {
                const chunk = images.slice(i, i + itemsPerPage);
                
                const pageDiv = document.createElement('div');
                pageDiv.classList.add('page');
                
                const gridDiv = document.createElement('div');
                gridDiv.classList.add('photo-grid');

                chunk.forEach(imgSrc => {
                    const cellDiv = document.createElement('div');
                    cellDiv.classList.add('grid-cell');

                    const img = document.createElement('img');
                    img.src = imgSrc;
                    img.classList.add('photo-item');
                    img.draggable = false;
                    
                    cellDiv.appendChild(img);
                    gridDiv.appendChild(cellDiv);
                });

                pageDiv.appendChild(gridDiv);
                bookWrapper.appendChild(pageDiv);
            }

            // ‡∏õ‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏≤‡∏î‡∏´‡∏ô‡∏±‡∏á‡∏™‡∏∑‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡∏Å‡∏±‡∏ö‡∏ò‡∏µ‡∏°‡πÉ‡∏´‡∏°‡πà
            const width = window.innerWidth > 600 ? 450 : 310;
            const height = window.innerWidth > 600 ? 650 : 460;

            pageFlip = new St.PageFlip(bookWrapper, {
                width: width, 
                height: height,
                size: "fixed",
                minWidth: 300,
                maxWidth: 1000,
                minHeight: 400,
                maxHeight: 1200,
                showCover: true,
                // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏á‡∏≤‡πÉ‡∏´‡πâ‡∏î‡∏π‡∏°‡∏µ‡∏°‡∏¥‡∏ï‡∏¥‡∏Ç‡∏∂‡πâ‡∏ô
                drawShadow: true,
                maxShadowOpacity: 0.2
            });

            pageFlip.loadFromHTML(document.querySelectorAll('.page'));
        }

        // --- Event Handlers ---

        document.getElementById('bookUpload').addEventListener('change', function(e) {
            const files = Array.from(e.target.files);
            if (files.length === 0) return;
            const imageUrls = [];
            let loadedCount = 0;

            files.forEach((file, index) => {
                const reader = new FileReader();
                reader.onload = (event) => {
                    imageUrls[index] = event.target.result;
                    loadedCount++;
                    if (loadedCount === files.length) {
                        const finalImages = imageUrls.filter(url => url !== undefined);
                        createBook(finalImages);
                    }
                };
                reader.readAsDataURL(file);
            });
        });

        function goBack() {
            bookScreen.style.display = 'none';
            uploadScreen.style.display = 'flex';
            document.getElementById('bookUpload').value = '';
            // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏û‡∏∑‡πâ‡∏ô‡∏´‡∏•‡∏±‡∏á
            bookScreen.style.backgroundImage = 'radial-gradient(#ffc0cb 2px, transparent 2px)';
            bookScreen.style.backgroundColor = '#fff0f5';
        }

        document.getElementById('bgUpload').addEventListener('change', function(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(event) {
                    // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î‡∏≠‡∏≠‡∏Å‡∏Å‡πà‡∏≠‡∏ô‡πÉ‡∏™‡πà‡∏£‡∏π‡∏õ
                    bookScreen.style.backgroundImage = `url(${event.target.result})`;
                    bookScreen.style.backgroundSize = 'cover';
                }
                reader.readAsDataURL(file);
            }
        });

        document.getElementById('bgColor').addEventListener('input', function(e) {
            // ‡πÄ‡∏Ñ‡∏•‡∏µ‡∏¢‡∏£‡πå‡∏•‡∏≤‡∏¢‡∏à‡∏∏‡∏î‡∏≠‡∏≠‡∏Å‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏™‡∏µ
            bookScreen.style.backgroundImage = 'none';
            bookScreen.style.backgroundColor = e.target.value;
        });

    </script>
</body>
</html>
